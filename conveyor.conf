include required("/stdlib/electron/electron.conf")

package-json {
  include required("package.json")
  include required("package-lock.json")
}

app {
  fsname = ${package-json.name}
  display-name = ${package-json.productName}
  rdns-name = io.github.invoke-ai.launcher
  vcs-url = ${package-json.homepage}

  sign: false

  // Override default inputs to exclude most of node_modules
  // But we need to include node-pty since it's external
  inputs = [
    package.json
    out -> .
    assets/bin -> bin
    node_modules/node-pty -> node_modules/node-pty
  ]

  // Point to the built output directories
  electron {
    // These paths are relative to the app inputs after mapping
    main = "main/index.js"
    preload = "preload/index.js"
  }

  mac.info-plist.LSMinimumSystemVersion = 14.0
}

conveyor.compatibility-level = 19
